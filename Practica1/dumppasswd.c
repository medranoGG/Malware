#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <err.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdint.h>

enum{
	Bufsz = 8 *1024,
};

int
main(int argc, char *argv[])
{


	int fd;
	char buf[Bufsz];
	int nr;

	fd = open("/etc/passwd", O_RDONLY);
	if(fd < 0){
		err(EXIT_FAILURE, "can't open file");
	}
	while((nr = read(fd, buf, Bufsz)) > 0){
		if(write(1, buf, nr) != nr){
			err(EXIT_FAILURE, "can't write to stdout");
		}

	}
	if(nr < 0){
		err(EXIT_FAILURE, "can't read");
	}
	close(fd);
	exit(EXIT_SUCCESS);
}
